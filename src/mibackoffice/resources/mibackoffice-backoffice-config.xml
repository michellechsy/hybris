<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  ~ [y] hybris Platform
  ~
  ~ Copyright (c) 2000-2015 hybris AG
  ~ All rights reserved.
  ~
  ~ This software is the confidential and proprietary information of hybris
  ~ ("Confidential Information"). You shall not disclose such Confidential
  ~ Information and shall use it only in accordance with the terms of the
  ~ license agreement you entered into with hybris.
  -->

<config xmlns="http://www.hybris.com/cockpit/config"
        xmlns:wz="http://www.hybris.com/cockpitng/config/wizard-config">

  <!-- Step6: Create a configurable flow wizard widget
    Resemble the basic structure
  -->
  <context component="create-wizard" type="Product">
    <wz:flow id="ProductWizard" title="create.product.title">

      <!-- define the object properties that is saved/used in the wizard -->
      <wz:prepare id="productPrepare">
        <!-- this one will be used for saving data -->
        <wz:initialize property="newProduct" type="Product"/>
        <!-- this is for temporary storage or for assigning a value as a SpEL expression
          Can also use the 'context' socket input (a map, prefixed with 'ctx')as an input object -->
        <wz:assign property="newProduct.code" value="ctx.code"/>
      </wz:prepare>

      <wz:step id="step1" label="create.product.essential.label"
               sublabel="create.product.essential.sublabel">
        <!-- Define the indroductory text for step1 -->
        <wz:info id="step1.intro" position="top" label="create.product.essential.intro"/>
        <!-- displayed properties -->
        <wz:content id="step1.content">
          <!--if not using the 'property-list', the 'qualifier' for each property would need to be
          defined with its parent like: newProduct.code -->
          <wz:property-list root="newProduct">
            <wz:property qualifier="code" type="java.lang.String"/>
            <wz:property qualifier="catalogVersion"/>
          </wz:property-list>
        </wz:content>
        <!-- 'actions' after the content is enough for creating a product-->
        <wz:navigation id="step1.navigation">
          <wz:cancel/>
          <!-- direct user to a different step based on the content entered:
          <wz:next>
	          <wz:if expression="!#empty(newProduct.code)" target="step2alternate" />
          </wz:next>
          -->
          <wz:next visible="!#empty(newProduct.code) and newProduct.catalogVersion != null"/>
          <wz:done visible="!#empty(newProduct.code) and newProduct.catalogVersion != null">
            <wz:save property="newProduct"/>
          </wz:done>
        </wz:navigation>
      </wz:step>

      <wz:step id="step2" label="create.product.descriptions.label"
               sublabel="create.product.descriptions.sublabel">
        <!-- add the 'description' field in rich text, the WYSIWYG editor must be specified-->
        <wz:info id="step2.intro" position="top" label="create.product.descriptions.intro"/>
        <wz:content id="step2.content">
          <wz:property-list root="newProduct">
            <wz:property qualifier="name" type="java.lang.String"/>
            <wz:property qualifier="description" type="java.lang.String"
                         editor="com.hybris.cockpitng.editor.wysiwyg"/>
          </wz:property-list>
        </wz:content>
        <wz:navigation id="step2.navigation">
          <wz:cancel/>
          <wz:back/>
          <wz:next/>
          <wz:done>
            <wz:save property="newProduct"/>
          </wz:done>
        </wz:navigation>
      </wz:step>

      <wz:step id="step3" label="create.product.categories.label"
               sublabel="create.product.categories.sublabel">
        <wz:info id="step3.intro" label="create.product.categories.intro" position="top"/>
        <wz:content id="step3.content">
          <wz:property qualifier="newProduct.supercategories"/>
        </wz:content>
        <wz:navigation id="step3.navigation">
          <wz:cancel/>
          <wz:back/>
          <wz:done>
            <wz:save property="newProduct"/>
          </wz:done>
        </wz:navigation>
      </wz:step>

    </wz:flow>
  </context>



</config>
